<template>
  <div class="modal-overlay fixed inset-0 bg-black/50 flex items-end z-50 animate-fade-in">
    <div class="modal-content bg-slate-800 w-full max-w-md rounded-t-2xl border-t border-blue-900 max-h-[90vh] overflow-y-auto animate-slide-up">
      <!-- Header -->
      <div class="sticky top-0 bg-slate-800 border-b border-blue-900 p-4 flex justify-between items-center">
        <h2 class="text-xl font-bold">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Å–ª—É–≥—É</h2>
        <button
          @click="$emit('close')"
          class="text-gray-400 hover:text-white text-2xl"
        >
          ‚úï
        </button>
      </div>

      <!-- Content -->
      <div class="p-4 space-y-4">
        <!-- Service Name -->
        <div>
          <label class="block text-sm font-semibold mb-2">–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏</label>
          <input
            v-model="editData.serviceName"
            type="text"
            class="w-full bg-slate-700 border border-blue-900 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"
          />
        </div>

        <!-- Description -->
        <div>
          <label class="block text-sm font-semibold mb-2">–û–ø–∏—Å–∞–Ω–∏–µ</label>
          <textarea
            v-model="editData.description"
            rows="4"
            class="w-full bg-slate-700 border border-blue-900 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500 resize-none"
          />
        </div>

        <!-- Category -->
        <div>
          <label class="block text-sm font-semibold mb-2">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
          <select
            v-model="editData.category"
            class="w-full bg-slate-700 border border-blue-900 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"
          >
            <option value="languages">üó£Ô∏è –Ø–∑—ã–∫–∏</option>
            <option value="music">üéµ –ú—É–∑—ã–∫–∞</option>
            <option value="design">üé® –î–∏–∑–∞–π–Ω</option>
            <option value="programming">üíª –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ</option>
            <option value="fitness">üí™ –§–∏—Ç–Ω–µ—Å</option>
            <option value="other">üì¶ –î—Ä—É–≥–æ–µ</option>
          </select>
        </div>

        <!-- Price -->
        <div>
          <label class="block text-sm font-semibold mb-2">–¶–µ–Ω–∞ (‚ÇΩ)</label>
          <input
            v-model="editData.price"
            type="number"
            class="w-full bg-slate-700 border border-blue-900 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"
          />
        </div>

        <!-- Max Concurrent Orders -->
        <div>
          <label class="block text-sm font-semibold mb-2">–ú–∞–∫—Å. –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤</label>
          <input
            v-model="editData.maxConcurrentOrders"
            type="number"
            class="w-full bg-slate-700 border border-blue-900 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"
          />
        </div>

        <!-- Availability -->
        <div>
          <label class="block text-sm font-semibold mb-3">–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å</label>
          <div class="space-y-2 bg-slate-700 rounded-lg p-3 border border-blue-900">
            <label class="flex items-center gap-2 cursor-pointer">
              <input
                v-model="editData.availability.weekdays"
                type="checkbox"
                class="w-4 h-4"
              />
              <span class="text-sm">–ë—É–¥–Ω–∏ (–ü–Ω-–ü—Ç)</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input
                v-model="editData.availability.weekends"
                type="checkbox"
                class="w-4 h-4"
              />
              <span class="text-sm">–í—ã—Ö–æ–¥–Ω—ã–µ (–°–±-–í—Å)</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input
                v-model="editData.availability.evenings"
                type="checkbox"
                class="w-4 h-4"
              />
              <span class="text-sm">–í–µ—á–µ—Ä–Ω–∏–µ —á–∞—Å—ã (18:00-23:00)</span>
            </label>
          </div>
        </div>

        <!-- Timezone -->
        <div>
          <label class="block text-sm font-semibold mb-2">–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å</label>
          <select
            v-model="editData.timezone"
            class="w-full bg-slate-700 border border-blue-900 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"
          >
            <option value="UTC+3">UTC+3 (–ú–æ—Å–∫–≤–∞)</option>
            <option value="UTC+4">UTC+4 (–ö–∞–∑–∞–Ω—å)</option>
            <option value="UTC+5">UTC+5 (–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥)</option>
            <option value="UTC+8">UTC+8 (–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫)</option>
          </select>
        </div>
      </div>

      <!-- Footer -->
      <div class="sticky bottom-0 bg-slate-800 border-t border-blue-900 p-4 flex gap-2">
        <button
          @click="$emit('close')"
          class="flex-1 bg-slate-700 hover:bg-slate-600 text-white font-semibold py-2 rounded-lg transition"
        >
          –û—Ç–º–µ–Ω–∞
        </button>
        <button
          @click="saveChanges"
          class="flex-1 bg-blue-600 hover:bg-blue-500 text-white font-semibold py-2 rounded-lg transition"
        >
          ‚úì –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
        </button>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, reactive, watch } from 'vue'

const props = defineProps({
  provider: Object
})

const emit = defineEmits(['close', 'save'])

const editData = reactive({
  serviceName: '',
  description: '',
  category: '',
  price: 0,
  timezone: 'UTC+3',
  availability: {
    weekdays: true,
    weekends: false,
    evenings: true
  },
  maxConcurrentOrders: 5
})

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
watch(
  () => props.provider,
  (newProvider) => {
    if (newProvider) {
      Object.assign(editData, newProvider)
    }
  },
  { immediate: true }
)

const saveChanges = () => {
  emit('save', editData)
}
</script>

<style scoped>
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out;
}

.animate-slide-up {
  animation: slideUp 0.3s ease-out;
}
</style>
