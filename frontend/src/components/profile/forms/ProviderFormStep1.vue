<template>
  <div>
    <h3 class="text-lg font-semibold text-blue-400 mb-4">üìù –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>

    <div class="space-y-3">
      <div>
        <label class="block text-xs font-semibold text-gray-400 mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏</label>
        <input
            :value="formData.serviceName"
            @input="updateField('serviceName', ($event.target as HTMLInputElement).value)"
            type="text"
            placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –£—Ä–æ–∫–∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –æ–Ω–ª–∞–π–Ω"
            class="w-full bg-slate-700 border border-blue-900 rounded-lg px-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500"
        />
      </div>

      <div>
        <label class="block text-xs font-semibold text-gray-400 mb-1">–û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏</label>
        <textarea
            :value="formData.description"
            @input="updateField('description', ($event.target as HTMLTextAreaElement).value)"
            placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ –≤—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç–µ"
            rows="3"
            class="w-full bg-slate-700 border border-blue-900 rounded-lg px-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 resize-none"
        />
      </div>

      <div class="grid grid-cols-2 gap-2">
        <div>
          <label class="block text-xs font-semibold text-gray-400 mb-1">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
          <select
              :value="formData.category"
              @change="updateField('category', ($event.target as HTMLSelectElement).value)"
              class="w-full bg-slate-700 border border-blue-900 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"
          >
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
            <option value="repair">üè† –†–µ–º–æ–Ω—Ç</option>
            <option value="business">üíº –ë–∏–∑–Ω–µ—Å</option>
            <option value="fashion">üëó –ú–æ–¥–∞</option>
            <option value="education">üìö –û–±—É—á–µ–Ω–∏–µ</option>
            <option value="design">üé® –î–∏–∑–∞–π–Ω</option>
            <option value="it">üíª IT</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-semibold text-gray-400 mb-1">–¶–µ–Ω–∞ (‚ÇΩ)</label>
          <input
              :value="formData.price"
              @input="updateField('price', Number(($event.target as HTMLInputElement).value))"
              type="number"
              placeholder="500"
              class="w-full bg-slate-700 border border-blue-900 rounded-lg px-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500"
          />
        </div>
      </div>

      <!-- Schedule Section - Moved here to reduce steps -->
      <div class="mt-4 pt-4 border-t border-slate-700">
        <h4 class="text-sm font-semibold text-blue-400 mb-3">‚è∞ –ö–æ–≥–¥–∞ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ?</h4>
        
        <div class="mb-3">
          <label class="block text-xs font-semibold text-gray-400 mb-1">–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å</label>
          <select
              :value="formData.timezone"
              @change="updateField('timezone', ($event.target as HTMLSelectElement).value)"
              class="w-full bg-slate-700 border border-blue-900 rounded-lg px-4 py-2 text-sm text-white focus:outline-none focus:border-blue-500"
          >
            <option value="UTC+3">UTC+3 (–ú–æ—Å–∫–≤–∞)</option>
            <option value="UTC+4">UTC+4 (–ö–∞–∑–∞–Ω—å)</option>
            <option value="UTC+5">UTC+5 (–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥)</option>
            <option value="UTC+8">UTC+8 (–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫)</option>
          </select>
        </div>

        <div class="space-y-2 bg-slate-700/50 rounded-lg p-3 border border-slate-700">
          <label class="flex items-center gap-2 cursor-pointer">
            <input
                :checked="formData.availability.weekdays"
                @change="updateAvailability('weekdays', ($event.target as HTMLInputElement).checked)"
                type="checkbox"
                class="w-4 h-4 cursor-pointer accent-blue-500"
            />
            <span class="text-sm">–ë—É–¥–Ω–∏ (–ü–Ω-–ü—Ç)</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input
                :checked="formData.availability.weekends"
                @change="updateAvailability('weekends', ($event.target as HTMLInputElement).checked)"
                type="checkbox"
                class="w-4 h-4 cursor-pointer accent-blue-500"
            />
            <span class="text-sm">–í—ã—Ö–æ–¥–Ω—ã–µ (–°–±-–í—Å)</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input
                :checked="formData.availability.evenings"
                @change="updateAvailability('evenings', ($event.target as HTMLInputElement).checked)"
                type="checkbox"
                class="w-4 h-4 cursor-pointer accent-blue-500"
            />
            <span class="text-sm">–í–µ—á–µ—Ä–∞ (18:00-23:00)</span>
          </label>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
interface FormData {
  serviceName: string
  description: string
  category: string
  price: number
  timezone: string
  availability: {
    weekdays: boolean
    weekends: boolean
    evenings: boolean
  }
  images: Array<{ file?: File; preview?: string }>
}

interface Props {
  formData: FormData
}

const props = defineProps<Props>()

const emit = defineEmits<{
  'update:formData': [data: FormData]
}>()

const updateField = (field: keyof FormData, value: any) => {
  emit('update:formData', { ...props.formData, [field]: value })
}

const updateAvailability = (field: keyof FormData['availability'], value: boolean) => {
  emit('update:formData', {
    ...props.formData,
    availability: { ...props.formData.availability, [field]: value }
  })
}
</script>

<style scoped></style>